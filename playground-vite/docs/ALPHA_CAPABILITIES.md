# ShepLang + VS Code Extension (Alpha Capabilities)

_Last updated: November 2025_

This document explains exactly what works in the current alpha release of the ShepLang playground, language server, and VS Code extension. Use it as the source of truth when onboarding new testers or crafting messaging around what founders can do today.

---

## 1. Language + Compiler Features

| Capability | Status | Notes |
|------------|--------|-------|
| `app`, `data`, `view`, `action` blocks | ‚úÖ Stable | Primary building blocks for describing business logic and UI state. |
| Compile-time verification | ‚úÖ Stable | 4 phases: type safety, null safety, exhaustiveness, API contract validation. All diagnostics shown in playground + VS Code. |
| `call` / `load` statements | ‚úÖ Stable (requires defined endpoints) | Works against ShepThon backends or any REST endpoint defined in the verification manifest. Verification fails if the endpoint/method does not exist. |
| Generated frontend output | ‚úÖ Stable | Playground compiles to TypeScript/React preview. CLI/VS Code extension emit the same production-ready code. |
| Generated backend (ShepThon) | ‚úÖ Available via CLI | Not surfaced in playground UI yet, but CLI/VS Code commands can scaffold backend handlers. |
| AI-assisted authoring | ‚öôÔ∏è Recommended | Playground + VS Code are tested with Cursor, Windsurf, and Claude. Deterministic grammar keeps AI generations consistent. |

---

## 2. Playground-Specific Features

- **Real Monaco editor** with ShepLang syntax highlighting, snippets, and theme toggle.
- **Inline diagnostics** surfaced from the actual ShepLang compiler (no mock parsing).
- **Instant preview** of the compiled React/TypeScript application.
- **Shareable URLs** (base64-encoded code in query string) so testers can send repros.
- **Local persistence** of playground code via `localStorage`.

### Notable omissions (by design)
- No file uploads or external assets in the playground sandbox.
- No backend hosting; playground is frontend-only and relies on mocked calls.
- No auth/session concept; use VS Code extension for auth-enabled flows.

---

## 3. VS Code Extension Features

- **Language Server:** Autocomplete, hover docs, go-to-definition, and diagnostics powered by the same compiler that runs in CI and the playground.
- **Code generation commands:** Compile `.shep` files to TypeScript targets (web app scaffold) with one command.
- **Snippets:** Insert `app`/`view`/`action` scaffolds and `call`/`load` patterns tailored to the verified grammar.
- **Error panel integration:** All verification phases show up in the VS Code problems list with clickable ranges.
- **CLI pairing:** `pnpm sheplang compile` mirrors the VS Code command output, useful for CI/CD.

---

## 4. Verified Workflow (Alpha)

1. **Model your business logic** in ShepLang using `data`, `view`, and `action`.
2. **Reference real APIs** with `call`/`load`. During alpha, stick to endpoints defined in the ShepThon manifest or your own REST spec so the verifier can confirm they exist.
3. **Compile inside VS Code** to generate the React/TypeScript web app + optional backend stubs.
4. **Preview** the UI inside the playground or by running `pnpm dev` in the generated project.
5. **Iterate with AI assistance** (Cursor/Windsurf/Claude) ‚Äì the deterministic grammar keeps AI output clean, and the verifier catches remaining issues before runtime.

---

## 5. Supported Outputs

| Target | Status | Delivery |
|--------|--------|----------|
| React + TypeScript Web App | ‚úÖ | Generated by playground preview and CLI. |
| Node/ShepThon Backend | ‚úÖ (CLI) | Generated stubs for CRUD + API integrations. |
| Other targets (Python, Rust, mobile) | üöß Roadmap | Highlighted in [ALPHA_LIMITATIONS_AND_BETA_PLAN.md](./ALPHA_LIMITATIONS_AND_BETA_PLAN.md). |

---

## 6. AST Importer (NEW)

The AST Importer converts existing React/Next.js projects to ShepLang + ShepThon, enabling rapid migration of production codebases.

### Supported Frameworks

| Framework | Detection | Entity Extraction | API Routes |
|-----------|-----------|-------------------|------------|
| Next.js (App Router) | ‚úÖ Auto | ‚úÖ Prisma | ‚úÖ route.ts handlers |
| Next.js (Pages Router) | ‚úÖ Auto | ‚úÖ Prisma | ‚öôÔ∏è API routes |
| Vite + React | ‚úÖ Auto | ‚öôÔ∏è Heuristics | N/A |
| Create React App | ‚úÖ Auto | ‚öôÔ∏è Heuristics | N/A |

### Import Pipeline

1. **Project Detection** ‚Äì Automatically identifies framework, TypeScript, Prisma
2. **React Parsing** ‚Äì Extracts components, props, state, JSX, event handlers
3. **Entity Extraction** ‚Äì Prisma schema ‚Üí ShepLang `data` blocks (100% accurate)
4. **View Mapping** ‚Äì Components ‚Üí ShepLang `view` blocks with widgets
5. **Action Mapping** ‚Äì Event handlers ‚Üí ShepLang `action` blocks
6. **API Correlation** ‚Äì Frontend fetch ‚Üí backend routes ‚Üí `call`/`load` statements
7. **Wizard Review** ‚Äì User renames/disables items before generation
8. **ShepThon Generation** ‚Äì Backend stubs matching detected API routes

### Features Detected

| Feature | Source | Output |
|---------|--------|--------|
| Prisma models | `schema.prisma` | `data` blocks with fields, relations |
| React components | `.tsx` files | `view` blocks with widgets |
| Event handlers | `onClick`, etc. | `action` blocks |
| API routes | `route.ts` | ShepThon endpoints |
| Fetch calls | `fetch()` | `call`/`load` statements |

### Wizard Panel

The import wizard displays all detected items with confidence scores:
- **Enable/disable** items to include/exclude from generation
- **Rename** entities, views, or actions before codegen
- **Confidence badges** (green ‚â•80%, orange 60-79%, gray <60%)
- **Generate backend** toggle for ShepThon output

### Example Output

**Input:** Next.js + Prisma project with Task CRUD

**Generated ShepLang:**
```sheplang
data Task:
  fields:
    id: number
    title: text
    completed: yes/no
    priority: text

view TaskList:
  list Task
  button "Add Task" -> AddTask
  button "Refresh" -> LoadTasks

action AddTask(title, priority):
  call POST "/api/tasks" with title, priority
  load GET "/api/tasks" into tasks
  show TaskList
```

**Generated ShepThon:**
```shepthon
model Task {
  id: Int
  title: String
  completed: Boolean
  priority: String
}

GET /api/tasks -> db.all("tasks")
POST /api/tasks -> db.add("tasks", body)
PUT /api/tasks/:id -> db.update("tasks", params.id, body)
DELETE /api/tasks/:id -> db.remove("tasks", params.id)
```

---

## 7. Best Practices for Testers

- Work inside VS Code (stable) + Playground (experimentation) simultaneously.
- Keep API specifications in sync with `.specify/` manifests so verification knows about every endpoint.
- When using `call`/`load`, always provide both method and path (e.g., `call POST "/tasks" with title`).
- Use the examples in [WEB_APP_BLUEPRINTS.md](./WEB_APP_BLUEPRINTS.md) to jumpstart real products.

If a capability is missing or unclear, log an issue in GitHub and reference this doc so we can keep it honest.
